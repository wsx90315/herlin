define(["module","./lib/simplehtmlparser.min"],function(t){"use strict";function e(t){return L.parse(t)}function n(t){return function(e){return e.tagName===t}}function r(t,e){p(t,function(t){var n=t.attribs.href;n&&e.deps.push(h(n,e.moduleId+"/../")),t.parentNode.removeChild(t)})}function i(t,e){var n,r,i,o=[],u={},s={context:"gk"};if(p(t,function(t){var n=t.attribs.src;n?o.push(h(n,e.moduleId+"/../")):e.script+=t.innerHTML()}),i=o.length,i&&(e.deps.push(o[i-1]),i>1)){for(var c=i-1;c>0;c-=1)u[o[c]]=[o[c-1]];try{n=requirejs.s.contexts.gk.config.shim,m.each(u,function(t,e){r=n[t]&&n[t].deps||[],u[t]=e.concat(r)})}catch(a){}s.shim=u,e.script="requirejs.config("+JSON.stringify(s)+");"+e.script}}function o(t,e){r(t.childNodes.filter(n("link")),e),e.template=t.innerHTML()}function u(t,e){var n="";p(t,function(t){n+=t.innerHTML()}),e.moduleText=E.requireVariables(e.deps)+";"+E.registerElement(e.template)+n}function s(t){return"(function(){"+E.moduleInfo(t.moduleId)+";"+d(t.script)+";define(function("+t.vars.join()+"){"+t.moduleText+"})}());"}function c(t,c){var a=e(t),f=a.childNodes,l=f.filter(n("link")),h=f.filter(n("script")),d=f.filter(n("element")),p=d.length?d[0].childNodes:[],m=p.filter(n("template")),g=p.filter(n("script"));return r(l,c),i(h,c),o(m.length?m[0]:"",c),u(g,c),s(c)}Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=[],i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in e){var u=e[o];t.call(i,u,o,e)&&r.push(u)}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var n=this.length>>>0;for(e=+e||0,1/0===Math.abs(e)&&(e=0),0>e&&(e+=n,0>e&&(e=0));n>e;e++)if(this[e]===t)return e;return-1});var a=".html",f=t.config(),l=f.lib,h=l.loadUrl,d=l.trimNewline,p=l.each,m=l.$,g=m.gk,v=function(){for(var t=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],e={},n=0,r=t.length;r>n;n++)e[t[n]]=!0;return e}(),y=new SimpleHtmlParser,b=function(){this.tagName=arguments[0],this.attribs=function(t){var e={};return p(t,function(t){e[t.name]=t.value}),e}(arguments[1]),this.childNodes=[]},N=function(){this.content=arguments[0]},T=function(){},w=b.prototype,k=N.prototype,x=T.prototype;w.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&this.childNodes.splice(e,1)},w.innerHTML=function(){var t="";return p(this.childNodes,function(e){t+=e.outerHTML()}),t},w.outerHTML=function(){var t=this,e=t.tagName,n="",r="";return p(Object.keys(t.attribs),function(e){n+=" "+e+'="'+t.attribs[e]+'"'}),r="<"+e+n+">"+t.innerHTML(),e.toLowerCase()in v||(r+="</"+e+">"),r},k.innerHTML=k.outerHTML=function(){return this.content},function(){function t(){return[new b("ROOT",[])]}function e(t){return t[t.length-1]}function n(t,e){t.push(e)}function r(t){return t.pop()}function i(t,n,r,i){var o=e(t),u=new b(n,i);return u.parentNode=o,o.childNodes.push(u),u}function o(t,n){var r=e(t),i=new N(n);return i.parentNode=r,r.childNodes.push(i),i}x.parse=function(e){var u=t();return y.parse(e,{startElement:function(t,e,r){var o=i(u,t,e,r);t.toLowerCase()in v||"/>"===e.substr(e.length-2)||n(u,o)},endElement:function(){r(u)},characters:function(t){t=t.trim(),t&&o(u,t)}}),u[0]}}();var L=new T,E={requireVariables:function(t){var e=[];return p(t,function(t){e.push('require("'+t+'")')}),e.join(";")},registerElement:function(t){return"function registerElement(n,c){$.gk.registerElement(n,'"+t+"',c)}"},moduleInfo:function(t){return"var module="+JSON.stringify({id:t})}};return g.registerElement=function(t,e,n){g.registry(t,{template:e,script:function(){for(var t=Object.keys(n||{}),e=0,r=t.length;r>e;e+=1)this[t[e]]=n[t[e]]}})},{load:function(t,e,n){e(["@text!"+t+a],function(e){var r={deps:[],vars:["require","exports","module"],moduleId:t,template:"",moduleText:"",script:""};n.fromText(c(e,r))})},pluginBuilder:"./html-build"}});